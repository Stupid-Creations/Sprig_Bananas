/*
First time? Check out the tutorial game:
https://sprig.hackclub.com/gallery/getting_started

@title: I_dunno
@author: 
@tags: []
@addedOn: 2024-00-00
*/

const player = "p"
const player2 = "a"
const spike = "s"

setLegend(
  [ player, bitmap`
................
................
......00........
.....0660.......
...0000000......
...0.020600.....
...00000660.....
.....006660.....
....00066600....
...00.06660.0...
...0.006660.00..
.....066600.....
.....06600......
.....0000.......
.....0..0.......
....00..00......` ],
  [ player2, bitmap`
................
................
......00........
.....0990.......
...0000000......
...0.020900.....
...00000990.....
.....009990.....
....00099900....
...00.09990.0...
...0.009990.00..
.....099900.....
.....09900......
.....0000.......
.....0..0.......
....00..00......`],
  [spike, bitmap`
......00........
......00........
......00........
.....0C0........
.....0C0........
.....0C0........
....0CCC0.......
....0CCC0.......
....0CCCC0......
....0CCCC0......
...0CCCCC0......
...0CCCCC0......
..0CCCCCC00.....
..0CCCCCCC0.....
..0CCCCCCC0.....
..0CCCCCCC0.....`]
)

setSolids([])


let level = 0
const levels = [
  map`
.s..s...
........
p.......
........
........
...s....
........
.s...a..`, map`
.......
.......
.......
.......
.......
.......
.......`
]

setMap(levels[level])

setPushables({
  [ player ]: [], [player2]: []
})



onInput("s", () => {
  getFirst(player).y += 1
})


onInput("w", () => {
  getFirst(player).y -= 1
})


onInput("a", () => {
  getFirst(player).x -= 1
})


onInput("d", () => {
  getFirst(player).x += 1
})

afterInput(() => {if( tilesWith(player,spike).length > 0){
setMap(levels[1])
  addText("player 2 won!", { 
  x: 3,
  y: 1,
  color: color`9`
})
};if( tilesWith(player2,spike).length > 0){
setMap(levels[1])
  addText("player 1 won!", { 
  x: 3,
  y: 1,
  color: color`4`
})
};if(true){addSprite(floor(math.random(0,8)),floor(math.random(0,8)),spike)}})


